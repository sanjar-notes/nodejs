## 426. Handling Errors

<strong><em>no description</em></strong>

We added validation and we see that a failing validation and hence a thrown
error as we're doing it here leads to a response that actually has null in the
data it gives us back but that has an errors key with an array of all the errors
it gathered. 

If you open the network tab by the way and you re-execute that, you also see
that it sets a status code of 500. 

Now that's nice but sometimes you want to add more detailed information. 

You can set your own status code though but we could add more information to the
errors we return and to do that, you can go to your app.js file and there where
you configure your graphql API, you can add another configuration option which
is called format error and this is actually a method which receives the error
detected by graphql and allows you to return your own format. 

Now if you just return error, you keep the default format which is exactly the
format we see here but you can change that of course. 

You can check if in your error here, you don't have the original error field, so
if you don't have that hence the exclamation mark at the beginning. 

Original error will be set by express graphql when it detects an error thrown in
your code, either by you or some third party package. 

If you have a technical error, let's say a missing character in your query here
or anything like that, then it will not have that original error and if we don't
have that, then I'll just return the error that was generated by graphql but if
I do have my original error, well then I can extract useful information from it
that I can add in other places and that is what we can do in the resolver now. 

Let's say validation fails, on the error that gets created here, I could add a
data field which is my array of errors which I populate here with my validation
error messages. 

I could also add a code here which I set to 422 or I come up with my own coding
system, I don't have to use http status codes here. 

And now in app.js, I can retrieve all of that from the original error, so I can
get my data from error, original error data and that might be undefined for
thrown errors that don't set it but that's ok. 

I can retrieve my message directly from the error because that is already pulled
out of the error by graphql and in case that should be undefined somehow, I can
set this to an error occured and I can get my code from the original error
again, there I named that code too and I could set this to a default value of
500. 

Now with all that pulled out, I can return my own error object here where I have
a message just like the original one but where I then also add my status field
which contains my code and a data field which contains my data and you can name
all these fields in exactly the way you want. 

And now with that and all the files saved here, if I hit enter again or play
again, now I see I get a different error output with the data I added and this
can be very useful and this is how you can handle errors in graphql. 

---