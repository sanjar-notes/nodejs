WEBVTT

00:02.580 --> 00:08.000
With the connection set up, let's go into our models folder and there to the product.js file

00:08.010 --> 00:12.360
and there we can actually delete everything.

00:12.420 --> 00:16.530
We don't need all of that right now, we'll write it from scratch. Here I

00:16.620 --> 00:18.690
first of all need to import two things.

00:18.720 --> 00:21.800
The first thing is sequelize itself,

00:21.810 --> 00:29.460
so again I will require, whoops, require sequelize here and that will give me back a class or constructor

00:29.460 --> 00:30.150
function

00:30.150 --> 00:34.700
hence I name this here with a capital S.

00:34.780 --> 00:39.140
The next thing I'll import is my database connection pool managed by sequelize,

00:39.220 --> 00:42.570
I'll also name this sequelize but with lowercase s,

00:42.580 --> 00:48.610
so I'll basically import what I export in my database.js file. Here

00:48.710 --> 00:55.460
I will import this by requiring and then go up one level into util and then there to the database.js

00:55.460 --> 00:56.980
file.

00:57.260 --> 00:58.830
Now with these two things imported,

00:58.880 --> 01:04.100
we can now define a model that will be managed by sequelize.

01:04.550 --> 01:10.820
So here in this file below my imports, I'll create a new constant and I'll name it product because in the product.js

01:10.820 --> 01:11.580
file

01:11.590 --> 01:13.530
I want to define my product model.

01:13.940 --> 01:17.820
Now this model is not defined as a class as we did it before

01:18.050 --> 01:21.260
but instead I use sequelize with the lowercase s,

01:21.290 --> 01:27.380
so my database connection pool which is more than a connection pool, it's actually a fully configured

01:27.380 --> 01:33.700
sequelize environment which does also have the connection pool but also all the features of the sequelize

01:33.710 --> 01:34.690
package

01:34.910 --> 01:42.500
and there we can define a new model by calling define. The first name that is the model name and by the

01:42.500 --> 01:47.080
way, here in the suggestion you also see an example and so on

01:47.210 --> 01:49.980
as you do in the official docs of course.

01:50.390 --> 01:56.360
Now the model name typically is a lowercase name and I'll name it product like this,

01:56.360 --> 01:59.750
you are free to name this however you want but to follow along smoothly,

01:59.750 --> 02:07.880
I recommend taking this name. The second argument defines the structure of our model and therefore also of

02:07.880 --> 02:10.970
the automatically created database table.

02:10.970 --> 02:16.340
This will be a javascript object and in there, we simply define the attributes or fields

02:16.400 --> 02:20.180
our product should have, for example I want to have an ID.

02:20.390 --> 02:26.430
Now an ID is then in turn defined with an object where I configured this attribute,

02:26.430 --> 02:34.330
there for example we set the type and the type is now one of the types defined by the sequelize package.

02:34.340 --> 02:37.060
So now I use sequelize with a capital S,

02:37.070 --> 02:44.230
so from this import here and there you find a bunch of types like number or string,

02:44.450 --> 02:50.870
so not var, char and so on but here you have the more javascript-ish names I could, would say and I want to

02:50.870 --> 02:59.260
use an integer here because my ID will be a number starting at 1 and then incrementing. To make it increment,

02:59.310 --> 03:04.610
I also configured this attribute to be auto-incrementing by setting auto-increment to true

03:04.930 --> 03:08.220
and in case you're wondering how I do know all of that,

03:08.370 --> 03:14.420
well again you find that in the official docs. On docs.sequelizejs.com,

03:14.490 --> 03:19.800
you can dive into sequelize, learn more about how it works and how you can configure it and under model

03:19.800 --> 03:20.940
definition,

03:20.940 --> 03:29.460
you learn all about how to define a model, how you can define your different tags for the model and you

03:29.460 --> 03:34.170
also see a list of all the supported data types, like the integer we just used.

03:34.200 --> 03:38.670
So this is where you can learn more about this and I can tell you that I want this to be auto-incrementing

03:38.670 --> 03:41.750
so I will set auto-increment to null, to true.

03:42.090 --> 03:48.420
I also don't want to allow this value to be empty, so I will allow null to false because I don't want

03:48.420 --> 03:50.500
to allow null values in there.

03:50.520 --> 03:51.620
Last but not least,

03:51.660 --> 03:57.300
I'll set primary key to true to basically define this as the primary key of the table which is an important

03:57.300 --> 04:05.950
concept in SQL databases for retrieving the data and then also for later defining relations. With

04:05.990 --> 04:10.830
that defined, a product of course also has other fields, for example a title.

04:10.970 --> 04:17.340
Now we can again define a javascript object to configure it in detail or if you just want to set the type,

04:17.390 --> 04:19.800
you can also use sequelize and then the type,

04:19.880 --> 04:24.980
so this is a shortcut in case you only want to set the type, though you could argue that we also at least

04:24.980 --> 04:27.090
want to set that this should never be null

04:27.230 --> 04:33.770
but here as a demo, I will just assign the type. For the price I'll go back to the javascript object and

04:33.770 --> 04:43.440
set the type to sequelize and then double and I will again set allow null to false to not allow null

04:43.440 --> 04:47.930
values here. Then I will set my image

04:47.940 --> 04:58.160
url here again to a javascript object where I set the type to sequelize string and I will set

04:58.610 --> 05:07.150
allow null to false to not allow null values here. And last but not least, I also want to have a description

05:08.790 --> 05:18.520
which also will have a type that is of type sequelize string and I will set allow null to false.

05:18.520 --> 05:20.470
Now this is my product model,

05:20.470 --> 05:22.560
last but not least we need to export it.

05:22.690 --> 05:30.030
So below my model definition here,I'll simply use module exports and export my product here,

05:30.160 --> 05:34.410
so this constant in which I define, store the defined model,

05:34.450 --> 05:36.600
this gets exported here.

05:36.880 --> 05:39.460
And with that, we made a huge step forward

05:39.520 --> 05:42.080
and we can now start using this product.

05:42.090 --> 05:45.640
Now let's see how we use it over the next lectures.
