WEBVTT

00:02.310 --> 00:04.280
So let's work on handlebars now,

00:04.470 --> 00:06.320
for now without the layout.

00:06.690 --> 00:13.530
So let's go to the add-product.html page and copy that over into a add-product.hbs

00:13.580 --> 00:16.330
file, like this.

00:16.560 --> 00:19.630
Now this is now our add product page,

00:19.640 --> 00:20.550
this is all looking good,

00:20.570 --> 00:25.700
now let's output the page title dynamically and we're not using a layout for now, I will show you how

00:25.760 --> 00:27.620
this would work in a second too,

00:27.830 --> 00:33.910
so let's add the page title, active class should here be on add product,

00:34.140 --> 00:39.600
no need to assign this conditionally because we're in the add product.hbs file anyways here, this

00:39.640 --> 00:41.250
is not in the layout.

00:41.790 --> 00:43.880
And now let's also go down there,

00:43.900 --> 00:45.870
this should all of course still work,

00:45.870 --> 00:48.290
so this was pretty straightforward I guess.

00:48.330 --> 00:55.160
So if we now save this and click on add product, this should work and this is now rendered by handlebars because

00:55.160 --> 00:57.440
that is our view engine.

00:57.830 --> 01:07.340
Now let's go to the shop.html file and let's copy all that code here and add a shop.hbs

01:07.380 --> 01:11.340
file here, add that code here, the

01:11.720 --> 01:21.640
title becomes shop or better dynamically output page title. And now the interesting part of course is

01:21.640 --> 01:26.150
here in the main section, there we can comment in this code,

01:26.550 --> 01:31.060
so let's remove the comment tags here

01:32.110 --> 01:37.230
and now I want to loop through all the articles and then of course also change the image here, this 

01:37.230 --> 01:39.640
is still the old not working image,

01:39.640 --> 01:43.300
let's take that new image link I added in the pug template,

01:43.500 --> 01:49.710
so let's move that into here too, like that.

01:51.090 --> 01:58.920
And with it added, let's now repeat this article for all the products we have and show no products found

01:58.920 --> 01:59.290
text

01:59.280 --> 02:04.910
if we got no products and for this we need to use a new handlebars index which you obviously don't know yet.

02:05.810 --> 02:10.070
Maybe you explored it in the official docs, otherwise let's add it together here.

02:10.920 --> 02:17.070
First of all there is an if helper, you still add your double curly braces here

02:17.430 --> 02:23.070
but then you add a hashtag for special block statements, block statements simply are statements which

02:23.100 --> 02:30.510
are not just outputting some text but which actually wraps some content that should be output conditionally

02:30.630 --> 02:32.230
or in a loop,

02:32.310 --> 02:37.640
here we can then add the if keyword and check if prods.length is greater than zero.

02:37.650 --> 02:40.090
So it's the same condition as in the pug template,

02:40.090 --> 02:42.660
just the syntax is a bit different.

02:42.690 --> 02:47.630
Now we want to output this article or actually not the article, the entire grid,

02:47.970 --> 02:52.200
so let's actually switch that, the entire grid here,

02:52.290 --> 02:54.060
let's indent this, indentation here

02:54.060 --> 02:56.730
doesn't matter but makes it easier to read.

02:56.880 --> 02:58.130
Here we want to wrap this

02:58.160 --> 03:04.240
and now we want to close that block at the end and we do that with a closing statement where we also have

03:04.410 --> 03:09.390
if here, by the way if here also has to sit next to the hashtag.

03:09.630 --> 03:15.330
So this opens an if block with the condition, then this content is only rendered if that condition is

03:15.330 --> 03:15.840
met

03:15.940 --> 03:18.140
and then we close it.

03:18.160 --> 03:23.320
Now of course we also want to have an else block so let's add this here too, hashtag else is then the

03:23.320 --> 03:27.310
key and there we simply put the content we want output

03:27.310 --> 03:34.880
if the condition is not met, no products found. With that let's save that and let's go back to the shop

03:35.600 --> 03:38.000
and we get an error.

03:38.420 --> 03:44.120
The problem we have here is that handlebars doesn't actually support statements like this,

03:44.210 --> 03:50.330
it just supports the output of keys that yield true or false.

03:50.330 --> 03:57.770
Now this means that we have to move that logic from the template into our node express code and pass

03:57.770 --> 04:00.710
the result of this check into the template.

04:00.830 --> 04:07.700
So we would go to shop.js and there, we actually add a new key value pair we pass into the template,

04:08.300 --> 04:10.110
has products maybe

04:10.520 --> 04:15.750
and this simply holds a value which is the result of our check here, products,

04:15.770 --> 04:20.900
so this products array here length greater 0.

04:20.910 --> 04:24.120
So now we just pass this key in there which is true or false,

04:24.180 --> 04:30.900
the result of this check and this is a core difference to pug already besides that html thing. Here

04:30.900 --> 04:32.010
in handlebars,

04:32.070 --> 04:36.300
we can't run any logic in our handlebars template,

04:36.510 --> 04:43.950
we just can output single property, single variables and their value and we can only use these in if blocks

04:43.950 --> 04:44.500
too.

04:44.760 --> 04:52.130
So here I can now check if has product is true because this is now the data I pass into this template

04:52.380 --> 04:54.620
and this actually also has a positive side,

04:54.630 --> 05:01.650
it might sound very complex but it forces us to put all our logic into the node express code where

05:01.650 --> 05:07.950
our logic typically should live and keep our templates lean because if you put too much logic in your

05:07.950 --> 05:13.530
templates, it can be hard to understand your code because you always have to check both, your express

05:13.530 --> 05:15.300
code and your templates

05:15.300 --> 05:19.250
otherwise you know the template is really just about displaying stuff,

05:19.320 --> 05:22.010
the logic always happens in node express.

05:22.020 --> 05:24.030
So these are two kinds of philosophies,

05:24.060 --> 05:30.030
it's up to you to choose your favorite but this is how express handlebars or how handlebars in general

05:30.150 --> 05:31.250
handles this.

05:31.620 --> 05:38.550
So now with this change, we can reload this page and now we just have a problem with else here

05:39.150 --> 05:42.700
but that is just that it's not

05:42.890 --> 05:44.760
#else, just else, just the else keyword

05:44.780 --> 05:45.680
my mistake,

05:45.680 --> 05:46.760
so now if I reload,

05:46.820 --> 05:48.370
we have no products found

05:48.440 --> 05:52.570
and if I do add my first book here, we do actually see that.

05:52.700 --> 05:57.530
However this of course is not the values we have in our products array,

05:57.560 --> 06:02.960
we have some hardcoded data here because I still have to add a block where we loop through all products.

06:03.470 --> 06:07.870
And this is done with an each block statement with #each

06:07.880 --> 06:11.690
and then you pass in an array, prods in our case.

06:11.720 --> 06:20.070
So now prods is passed into this loop and now in there, this element is repeated for each element

06:20.150 --> 06:23.010
and we also have to close this with /each

06:23.120 --> 06:25.540
after we're done repeating our code.

06:25.580 --> 06:30.520
So now this block of html code is repeated for every product.

06:30.530 --> 06:36.040
The question now just is how can we access this product and here handlebars

06:36.050 --> 06:37.670
also gives us only one way,

06:37.790 --> 06:44.490
it gives us the this keyword which refers to the element in the array for the current iteration,

06:44.510 --> 06:48.460
so to each product. So therefore we can output this title here

06:48.470 --> 06:56.170
for example because this will always refer to one product and one product still is a javascript object

06:56.480 --> 07:01.620
as stored in the array here in the admin.js file, an object with a title key.

07:01.940 --> 07:05.850
So now if we save this and we reload this page,

07:06.020 --> 07:10.250
now we see first book here because this is the title we assigned.

07:10.310 --> 07:16.430
So this is now how handlebars works and it's really important that you understand this different philosophy

07:16.580 --> 07:22.220
of having less logic in the template, more logic in the node express code,

07:22.250 --> 07:28.250
so you have to prepare everything there so that in the template, you don't have to write any javascript

07:28.400 --> 07:30.030
expressions.

07:30.440 --> 07:31.350
Therefore this is

07:31.350 --> 07:35.140
now the project converted to handlebars

07:35.330 --> 07:38.600
except for one thing and that is of course the layout.
