WEBVTT

00:02.380 --> 00:04.420
Updating was successful,

00:04.420 --> 00:07.280
now let's also make sure we can delete products.

00:07.450 --> 00:11.640
So in admin.js, I'm talking about the post delete product method here

00:11.650 --> 00:17.380
now. We get the product ID which is good, now delete by ID does not exist in a sequelize

00:17.380 --> 00:27.400
world, instead on the product we can call destroy and destroy allows us to destroy any product we find

00:28.210 --> 00:29.550
through our options here

00:29.650 --> 00:34.300
and these options allow us to for example add a where condition to narrow down which product to delete. We

00:35.230 --> 00:37.040
can also use a different approach,

00:37.180 --> 00:43.120
instead of calling destroy like this and adding a condition which product to find which is of course

00:43.120 --> 00:43.940
fine,

00:44.230 --> 00:48.730
we can also use find by ID again to find a product by that ID

00:49.630 --> 01:00.220
and then again have our well known then and error, catch methods and in then, we know we got a product and

01:00.230 --> 01:01.420
on that product,

01:01.520 --> 01:03.760
we can now also call destroy

01:03.800 --> 01:09.530
and now this will destroy the found product. We can return this because this will also yield a promise

01:09.980 --> 01:17.990
and therefore add another then block which will execute once the destruction succeeded and there

01:18.020 --> 01:28.500
we can if we want console log destroyed product and we can now also redirect thereafter.

01:28.730 --> 01:35.240
We should redirect here to make sure we only redirect once the deletion succeeded. If we now go back

01:35.240 --> 01:42.830
to our application and I add a new dummy product without any picture, just like this and we go to admin

01:42.890 --> 01:43.600
products,

01:43.640 --> 01:46.900
I got stuck on loading this automatically, I'll look into this a second

01:47.090 --> 01:52.820
but if we go to admin products manually, we see it here if I click delete, this works.

01:52.820 --> 02:00.690
Now one thing I noticed is that if I added a product here, we get stuck and we don't redirect,

02:00.710 --> 02:08.330
so for adding a product host add product here, we don't do anything in then block, there we should of

02:08.330 --> 02:13.250
course also redirect to /admin/product,

02:13.250 --> 02:16.850
so basically to the same we redirect when deleting.

02:17.210 --> 02:20.110
So now if we go back

02:23.610 --> 02:32.090
and we add a new product again, this is working and now we can also delete the products here.

02:32.110 --> 02:35.480
So this is now all working and now we can manage the products,

02:35.560 --> 02:36.980
we can view them here,

02:37.030 --> 02:42.670
now one thing we haven't touched at all are relations though because we don't just have products, we

02:42.670 --> 02:46.230
all have a cart and eventually, we'll also have users.
