WEBVTT

00:02.230 --> 00:08.170
In the last lecture you saw how to handle requests and how to read some data from the requests like

00:08.170 --> 00:12.820
for example the url and which http method we used.

00:12.940 --> 00:15.730
Now we'll learn about different http methods throughout the course,

00:15.730 --> 00:21.550
by the way get is default method used if you just enter a url into your browser.

00:21.940 --> 00:23.490
Let's now shrink this again,

00:23.630 --> 00:24.660
let's quit the server,

00:24.670 --> 00:26.490
you always need to quit and restart

00:26.500 --> 00:31.750
if you edit it because otherwise your changes will not be reflected because the old process will still

00:31.750 --> 00:32.710
be running

00:33.070 --> 00:35.890
and let's now also use that response object.

00:35.890 --> 00:41.470
Now we could log that with the console but actually this does not hold any interesting data,

00:41.470 --> 00:44.150
instead we can use it to fill it with data

00:44.170 --> 00:46.070
we want to send back.

00:46.120 --> 00:50.620
We do this by calling res and now what?

00:50.620 --> 00:54.010
There are a couple of methods we can use, for example set header,

00:54.010 --> 00:56.130
this allows us to set a new header.

00:56.320 --> 01:03.160
For example content-type and that is a default header which the browser knows and understands

01:03.160 --> 01:06.990
and accepts and then as a second value here, as a second argument,

01:07.010 --> 01:10.060
in set header, we set a value for this header key,

01:11.560 --> 01:13.880
and we can send this to or set this to text.html

01:13.880 --> 01:14.750
.

01:14.750 --> 01:22.370
Now what this will do is it will attach a header to our response where we basically pass some meta information

01:22.520 --> 01:28.870
saying that the type of the content which will also be part of the response is html.

01:29.110 --> 01:32.700
Now there is of course only a certain set of supported headers

01:32.720 --> 01:35.510
the browser understands and after this lecture,

01:35.510 --> 01:41.340
you'll find another lecture with some link where you can learn which headers you can set.

01:41.390 --> 01:43.190
Now you don't need to set that many,

01:43.190 --> 01:44.160
let me say that

01:44.260 --> 01:49.160
and later we will even learn about a package that does this for us so that we don't have to set the

01:49.170 --> 01:50.810
content type on our own.

01:51.110 --> 01:52.870
But here I will set it, now

01:52.880 --> 01:57.490
one important thing is missing of course and that is the html code, right.

01:57.590 --> 02:01.460
Thus far I'm saying we have html code but I'm not sending it.

02:01.490 --> 02:07.930
Now we do this by setting response and now we can set write here,

02:07.930 --> 02:14.760
write allows us to write some data to the response and this basically works in chunks you could say

02:15.130 --> 02:16.890
or in multiple lines,

02:16.900 --> 02:19.340
this would be a good picture to look at this,

02:19.360 --> 02:21.790
you write multiple lines of response.

02:21.790 --> 02:28.010
For example if we write html code like this, res write

02:28.210 --> 02:33.580
and if this looks super strange now, it is, we'll learn about a way easier way of sending html later,

02:33.580 --> 02:34.600
no worries.

02:34.780 --> 02:40.110
So here I'm just sending html and you can also put longer html in there,

02:40.110 --> 02:52.190
of course you could now have your head where you set the title, my first page like this and you could put

02:52.220 --> 02:54.560
even more into that line but to make it easier to read

02:54.560 --> 02:55.510
I'll write

02:55.520 --> 03:03.680
a new line where I now have my body. So I'm basically writing a whole html document here in a very complex

03:03.680 --> 03:04.240
way

03:04.610 --> 03:11.810
and there I'll just add a h1 tag saying hello from my nodejs server.

03:12.130 --> 03:12.370
Ok

03:12.380 --> 03:17.560
so this is now some html code and it will be written to the response line by line.

03:17.630 --> 03:23.740
We now also need to tell node once we're done with creating that response and we do this by calling

03:23.840 --> 03:31.310
end, so after we set all the headers and wrote all the data to the response body, we call end and now

03:31.310 --> 03:34.700
is the point where we must not write anymore.

03:34.730 --> 03:40.970
We can still call write but this will result in an error because we must not change the response after

03:40.970 --> 03:45.920
we ended it because this is basically the part where we will send it back to the client,

03:46.040 --> 03:49.090
nodejs will send it back to the client.

03:49.460 --> 03:56.510
So here it should send back a response with some html code inside of it where we also tell the browser

03:56.570 --> 03:58.060
that it's html code,

03:58.100 --> 04:00.350
the browser wouldn't know otherwise.

04:00.470 --> 04:07.140
And with that if we save that file, make sure you never forget to save your changes and we re-execute

04:07.140 --> 04:08.030
it,

04:08.060 --> 04:10.200
we again have that running process

04:10.370 --> 04:18.660
and now if I reload my localhost 3000 page here, we see hello from my nodejs server.

04:18.860 --> 04:25.110
And if I open the chrome developer tools here which you can also do from the menu, I use the shortcut,

04:25.130 --> 04:31.960
you can also use view developer, developer tools or that shortcut you see here.

04:31.990 --> 04:40.270
Now if you do that, let we reload, in the network tab here you will see this request, this first request

04:40.370 --> 04:45.190
and there you see headers, like for example in response headers,

04:45.350 --> 04:51.970
there you see my content type which I set right, this is the header we set here

04:52.180 --> 04:58.390
and if we click on response itself to see the response body, we see that html document code we

04:58.390 --> 05:02.920
wrote with the head section, with my first page and so on.

05:04.430 --> 05:07.650
So this is now how we can send a response,

05:07.760 --> 05:14.030
we'll later also learn about a way simpler way of doing that by using the expressjs framework

05:14.030 --> 05:20.380
but it's super important that you understand all the nitty gritty details that go on behind the scenes

05:20.390 --> 05:26.180
and in this case, we simply understand it by writing all the nitty gritty code on our own business. This is how

05:26.180 --> 05:29.600
we can work with requests and send responses,

05:29.780 --> 05:35.320
now let's connect both the request data we can get and the response data we can send.
