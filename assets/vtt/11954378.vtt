WEBVTT

00:02.260 --> 00:04.530
So now that the csrf protection was added,

00:04.630 --> 00:11.770
let me quickly fix that error where I was not able to order an item and there, the path username is required

00:11.830 --> 00:13.500
is the issue which is thrown,

00:13.510 --> 00:20.220
let's quickly check the shop controller and there, the post order and in there, I indeed store the username

00:20.260 --> 00:23.080
and I'm not storing the username anymore here.

00:23.320 --> 00:25.720
When signing up, users only have the email,

00:25.720 --> 00:34.150
so here we could store the e-mail for our user with request user e-mail on the order, like this.

00:34.150 --> 00:40.600
So instead of the name, I now store the e-mail of the user in here or you also omit this and just store the user

00:40.600 --> 00:42.420
id, whatever you want.

00:42.640 --> 00:49.960
Now in our order model, this means that here I also don't expect the name but the email which still is

00:49.960 --> 00:51.820
a string and still is required,

00:52.120 --> 00:55.500
So this is a tiny change that needs to be done to fix that issue

00:55.530 --> 01:01.320
and if I now go back to products and I add this to my cart and I add it to my cart

01:01.360 --> 01:04.720
again let's say therefore I have to order this,

01:04.720 --> 01:06.000
now this works

01:06.130 --> 01:07.390
and the cart is empty.

01:07.390 --> 01:10.920
So this was just a little node something that was required,

01:10.960 --> 01:11.770
let's logout,

01:11.770 --> 01:12.610
this all works.

01:12.610 --> 01:14.080
This is this bug fixed.
