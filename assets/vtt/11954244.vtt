WEBVTT

00:02.220 --> 00:05.910
To implement a session, we'll need another third party package,

00:05.910 --> 00:11.490
we'll need another package which helps us with managing sessions. For that we'll install it with npm

00:11.490 --> 00:19.200
install --save and the package is named express-session, it's a package which is actually part

00:19.200 --> 00:24.980
of the official expressjs suite but not baked into expressjs itself

00:25.110 --> 00:30.420
but now we already got it installed and now we're ready to use it. To use it,

00:30.450 --> 00:35.130
we'll go to our app.js file because we want to initialize that session early on,

00:35.130 --> 00:38.460
we want to initialize that session when we,

00:39.180 --> 00:45.060
well when we start up our server then we want to initialize the session middleware at least and the session

00:45.060 --> 00:48.470
will then be used for every incoming request.

00:48.510 --> 00:50.690
So in here we create a new constant,

00:50.700 --> 00:56.370
so we basically import something here which I'll name session, the name is up to you and I will require

00:56.610 --> 00:58.610
express session,

00:58.610 --> 00:59.940
that is what I'll require here,

00:59.940 --> 01:00.800
so that is the package

01:00.810 --> 01:02.930
we just installed.

01:02.920 --> 01:10.400
Now with that installed, we can set it up here along with the other middleware let's say. There we register

01:10.410 --> 01:18.870
another middleware with app use and to app use, we pass session and we execute this as a function

01:18.870 --> 01:20.240
and to the function,

01:20.310 --> 01:24.780
we pass a javascript object where we configure the session setup.

01:24.780 --> 01:26.810
For example we need to set a secret,

01:26.810 --> 01:32.980
this will be used for signing the hash which secretly stores our ID in the cookie.

01:33.210 --> 01:34.050
So here I'll set

01:34.050 --> 01:36.390
a secret, you can enter any text here,

01:36.420 --> 01:38.610
it should typically be a long string,

01:38.790 --> 01:40.500
I'll name it my secret

01:40.530 --> 01:44.850
but again in production, this should be a long string value.

01:46.420 --> 01:51.550
Then you should add the re-save option and set this to false,

01:51.550 --> 01:58.870
this means that the session will not be saved on every request that is done, so on every response that

01:58.870 --> 01:59.340
is sent

01:59.410 --> 02:01.690
but only if something changed in the session.,

02:01.690 --> 02:05.250
this will obviously improve performance and so on.

02:05.520 --> 02:11.530
Also there is the save uninitialized value which you should set to false because this will also basically

02:11.920 --> 02:17.170
ensure that no session gets saved for a request where it doesn't need to be saved because nothing was

02:17.230 --> 02:18.700
changed about it

02:19.120 --> 02:20.340
and that is it.

02:20.350 --> 02:22.160
These are the core things you need to set.

02:22.210 --> 02:28.210
You could for example also configure the session cookie, you could give it a max age by setting a date

02:28.530 --> 02:30.100
or add the expires key,

02:30.190 --> 02:35.450
so you can configure that cookie but you can also go with the default settings. And with that, the session

02:35.600 --> 02:39.160
middleware is initialized and we're now ready to use the session.

02:39.160 --> 02:41.590
Now let's start using it in the next lecture.
