## The Cart model
Created Sunday 7 May 2023 at 10:16 am

Since MongoDB allows nested docs by default, we don't need something like `CartItem` here. In other words, we can store an array (CartItems) directly.

Also, since User and Cart are 1-1 related, we don't even need a `Cart` model, we could just add a `cart` attribute to the User model itself.

Deleting Cart, CartItem, and updating User:
```js
class User {
  constructor(/* existing params, */, cart) {
    // existing code
    
    this.cart = cart ?? { items: [] }; 
    // typeof cart = { items: [{ ...product, quantity }] }
  }

  async addToCart(product, quantity = 1) {
	const existingIndex = cart.items.findIndex(item => item.product._id === product._id_);

	if(existingIndex === -1 )
      this.cart.items.push({...product, quantity });
    else
	  this.card.items[existingIndex].quantity += quantity;
	
	const db = getDB();

	return db
			.collection('users')
			.updateOne(
				{ _id: new mongodb.ObjectId(this.id) },
				{ $set: { cart: this.cart } }
			)
			.then(result => { console.log(result); return result; });
			.catch(console.log);
  }
}
```